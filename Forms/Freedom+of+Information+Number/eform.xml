<?xml version="1.0" encoding="utf-8"?>
<EForm xmlns="http://ebms.com.au/schema/interchange/1.1">
  <Description>When a Freedom of Information Number is required, raise a record of this form and use the ID as the basis new unique number. This will ensure with 100% certainty that there is no double up in ID. </Description>
  <DataDefinition>
    <MinimumRows>0</MinimumRows>
    <Columns>
      <SystemColumn Which="EFormType" Behaviour="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </SystemColumn>
      <SystemColumn Which="RecordID" Behaviour="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format>
          <Number DecimalPlaces="" Prefix="" Suffix="" ThousandsSeparator="false" ScientificNotation="false" />
        </Format>
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </SystemColumn>
      <SystemColumn Which="LineNumber" Behaviour="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format>
          <Number DecimalPlaces="" Prefix="" Suffix="" ThousandsSeparator="false" ScientificNotation="false" />
        </Format>
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </SystemColumn>
      <SystemColumn Which="DateCreated" Behaviour="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format>
          <DateTime FormatString="dd-MMM-yyyy" />
        </Format>
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </SystemColumn>
      <SystemColumn Which="DateLastUpdated" Behaviour="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format>
          <DateTime FormatString="dd-MMM-yyyy" />
        </Format>
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </SystemColumn>
      <SystemColumn Which="DateDue" Behaviour="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format>
          <DateTime FormatString="dd-MMM-yyyy" />
        </Format>
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </SystemColumn>
      <SystemColumn Which="DateClosed" Behaviour="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format>
          <DateTime FormatString="dd-MMM-yyyy" />
        </Format>
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </SystemColumn>
      <SystemColumn Which="Priority" Behaviour="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="0-Unassigned" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </SystemColumn>
      <SystemColumn Which="Status" Behaviour="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="Start" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </SystemColumn>
      <SystemColumn Which="Assignee" Behaviour="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </SystemColumn>
      <SystemColumn Which="Sender" Behaviour="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </SystemColumn>
      <SystemColumn Which="Originator" Behaviour="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </SystemColumn>
      <SystemColumn Which="Description" Behaviour="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </SystemColumn>
      <SystemColumn Which="WasRejected" Behaviour="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </SystemColumn>
      <Column Name="Financial Year" DataType="Number" Guid="ddd38367-5031-4be4-8e12-faf6d6988721" IsHeader="true" IsMandatory="false" IsPartOfUniqueKey="false" IsPersistent="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <AccessControlGroupMemberships />
        <AccessControlGroups />
        <Security OverrideEFormPermissions="false">
          <Roles />
        </Security>
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format>
          <Number DecimalPlaces="" Prefix="" Suffix="" ThousandsSeparator="false" ScientificNotation="false" />
        </Format>
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </Column>
      <Column Name="Allocated Number" DataType="Number" Guid="a3c2b0a3-c27e-4ea1-a20c-4218400ccf63" IsHeader="true" IsMandatory="false" IsPartOfUniqueKey="false" IsPersistent="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <AccessControlGroupMemberships />
        <AccessControlGroups />
        <Security OverrideEFormPermissions="false">
          <Roles />
        </Security>
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format>
          <Number DecimalPlaces="" Prefix="" Suffix="" ThousandsSeparator="false" ScientificNotation="false" />
        </Format>
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </Column>
      <Column Name="Formatted Number" DataType="String" Guid="4b85598e-8957-461c-aacc-c672300246b3" IsHeader="true" IsMandatory="false" IsPartOfUniqueKey="false" IsPersistent="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <AccessControlGroupMemberships />
        <AccessControlGroups />
        <Security OverrideEFormPermissions="false">
          <Roles />
        </Security>
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </Column>
      <Column Name="Is Distinct" DataType="Boolean" Guid="9ed4059b-a593-43a1-9eb6-fcb8fe2a5f8d" IsHeader="true" IsMandatory="false" IsPartOfUniqueKey="false" IsPersistent="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <AccessControlGroupMemberships />
        <AccessControlGroups />
        <Security OverrideEFormPermissions="false">
          <Roles />
        </Security>
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </Column>
      <Column Name="Temp" DataType="Any" Guid="a1623405-e2b9-4219-9d69-d4af9fd0c5d5" IsHeader="true" IsMandatory="false" IsPartOfUniqueKey="false" IsPersistent="true" ValidationFormula="" ValidationTags="" Formula="" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <AccessControlGroupMemberships />
        <AccessControlGroups />
        <Security OverrideEFormPermissions="false">
          <Roles />
        </Security>
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </Column>
      <Column Name="Parent Structure" DataType="Any" Guid="dd525840-c306-4ae1-bd2d-dd8504da5b57" IsHeader="true" IsMandatory="false" IsPartOfUniqueKey="false" IsPersistent="false" ValidationFormula="" ValidationTags="" Formula="LET $current := ARRAY([EFormType], [RecordID]);&#xA;LET $descriptionColumns := &#xA;HASH(&#xA;&#x9;&quot;Contract&quot;,  &#x9;&#x9;&#x9;&#x9;&#x9;&quot;Contract Number&quot;, &#xA;&#x9;&quot;Vendor&quot;, &#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&quot;Company Name&quot;,&#xA;&#x9;&quot;Procurement&quot;, &#x9;&#x9;&#x9;&#x9;&#x9;&quot;Procurement Number&quot;,&#xA;&#x9;&quot;Project&quot;, &#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&quot;Project Number&quot;,&#xA;    &quot;Evaluation&quot;, &#x9;&#x9;    &#x9;&#x9;&quot;Description&quot;,&#xA;  &#x9;&quot;Information Request&quot;,  &#x9;&#x9;&quot;File No.&quot;, &#xA;&#x9;&quot;Subpoena&quot;, &#x9;&#x9;&#x9;&#x9;&#x9;&quot;File No.&quot;,&#xA;&#x9;&quot;Privacy Incident&quot;, &#x9;&#x9;&#x9;&quot;File No.&quot;&#xA;); &#xA;&#xA;LET $altFormName:= HASH(&#xA;  &#x9;&quot;Insurance&quot;,&#x9;&quot;Compliance&quot;&#xA;  );&#xA;&#xA;LET $getLabelText := $(eFormType, recordID)&#xA;(&#xA;  &#x9;LET $targetColumn := HASH_GET($descriptionColumns, $eFormType);&#xA;  &#x9;RETURN &#xA;  &#x9;IF( $targetColumn = NULL, NULL,&#xA;&#x9;&#x9;LET $isthisRecord := ARRAY($eFormType, $recordID) = $current;&#xA;&#x9;&#x9;LET $title:= &#xA;&#x9;&#x9;IF( $isthisRecord = TRUE, &#xA;&#x9;&#x9;&#x9;CURRENT_VALUE($targetColumn),&#xA;&#x9;&#x9;&#x9;ARRAY_FIRST(DB_LOOKUP(&#xA;&#x9;&#x9;&#x9;&#x9;ARRAY($targetColumn),&#xA;&#x9;&#x9;&#x9;&#x9;$eFormType, &#xA;&#x9;&#x9;&#x9;&#x9;&quot;[RecordID] FAST_EQUAL_TO &quot; &amp; $recordID&#xA;&#x9;&#x9;&#x9;))&#xA;&#x9;&#x9;  );&#xA;&#x9;&#x9;//shortern the descriptive label/ title&#xA;&#x9;&#x9;LET $charCount := LEN($title);&#xA;&#x9;&#x9;LET $titleArray := SPLIT($title, &quot; &quot;);&#xA;&#x9;&#x9;LET $wordCount := ARRAY_LENGTH($titleArray);&#xA;&#xA;&#x9;&#x9;LET $charLimit := 30; &#xA;&#x9;&#x9;LET $wordLimit := ARRAY_LENGTH( SPLIT( LEFT($title, $charLimit), &quot; &quot;) );&#xA;&#xA;&#x9;  RETURN //ARRAY_TAKE($titleArray, $wordLimit)&#xA;&#x9;&#x9;IF(&#xA;&#x9;&#x9;&#x9;$wordCount &lt;= $wordLimit, $title,&#xA;&#x9;&#x9;&#x9;ARRAY_JOIN(&#xA;&#x9;&#x9;&#x9;&#x9;ARRAY_TAKE($titleArray, $wordLimit), &quot; &quot;&#xA;&#x9;&#x9;&#x9;)&amp; &quot; ...&quot;&#xA;&#x9;&#x9;)&#xA;&#x9;  )&#xA; &#xA;); &#xA;&#xA;LET $getReadAccess := $(eFormType, recordID)&#xA;( EBMS_GET_EFORMRECORD_PERMISSION($eFormType, $recordID, &quot;read&quot;));&#xA;&#xA;LET $currentDes := CALL($getLabelText, [EFormType], [RecordID]);&#xA;LET $currentAccess := FALSE;&#xA;&#xA;RETURN&#xA;IF(&#xA;&#x9;[Parent Structure] &lt;&gt; NULL, [Parent Structure],&#xA;  &#x9;(&#xA;&#xA;&#x9;  LET $parent := &#xA;&#x9;  IF( &#xA;&#x9;&#x9;[RecordID] &gt; 0, &#xA;&#x9;&#x9;(&#xA;&#x9;&#x9;  LET $record := EBMS_GET_PARENT_RECORD(ARRAY_FIRST($current), ARRAY_INDEX($current, 2));&#xA;&#x9;&#x9;  RETURN &#xA;&#x9;&#x9;&#x9;  IF(  ARRAY_FIRST($record) == NULL, NULL,&#xA;&#x9;&#x9;&#x9;&#x9;ARRAY_CONCAT( &#xA;&#x9;&#x9;&#x9;&#x9;  $record, &#xA;&#x9;&#x9;&#x9;&#x9;  CALL($getLabelText, ARRAY_FIRST($record), ARRAY_INDEX($record, 2)),&#xA;&#x9;&#x9;&#x9;&#x9;  CALL($getReadAccess, ARRAY_FIRST($record), ARRAY_INDEX($record, 2))&#xA;&#x9;&#x9;&#x9;&#x9;  )&#xA;&#xA;&#x9;&#x9;&#x9;  )&#xA;&#x9;  )); &#xA;&#xA;&#x9;  LET $gParent := &#xA;&#x9;  IF( &#xA;&#x9;&#x9; $parent &lt;&gt; NULL, &#xA;&#x9;&#x9;(&#xA;&#x9;&#x9;  LET $record := EBMS_GET_PARENT_RECORD(ARRAY_FIRST($parent), ARRAY_INDEX($parent, 2));&#xA;&#x9;&#x9;  RETURN &#xA;&#x9;&#x9;&#x9;  IF(  ARRAY_FIRST($record) == NULL, NULL,&#xA;&#x9;&#x9;&#x9;&#x9;ARRAY_CONCAT( &#xA;&#x9;&#x9;&#x9;&#x9;  $record, &#xA;&#x9;&#x9;&#x9;&#x9;  CALL($getLabelText, ARRAY_FIRST($record), ARRAY_INDEX($record, 2)),&#xA;&#x9;&#x9;&#x9;&#x9;  CALL($getReadAccess, ARRAY_FIRST($record), ARRAY_INDEX($record, 2))&#xA;&#x9;&#x9;&#x9;  )&#xA;&#x9;&#x9;  )&#xA;&#x9;  )); &#xA;&#xA;&#x9;  LET $hash :=  &#xA;&#x9;  HASH_MERGE(&#xA;&#x9;&#x9;  IF( $parent &lt;&gt; NULL, HASH(&quot;parent&quot;, &#x9;$parent)),&#xA;&#x9;&#x9;  IF( $gParent &lt;&gt; NULL, HASH(&quot;gparent&quot;, &#x9;$gParent))&#xA;&#x9;  );&#xA;&#xA;&#x9;  LET $parentStructure := &#x9;//2nd instance&#xA;&#x9;  IF( &#xA;&#x9;&#x9;  ARRAY_LENGTH(HASH_KEYS($hash)) &gt;0, $hash, NULL&#xA;&#x9;  );&#xA;&#xA;&#x9;  LET $parentData:= &#xA;&#x9;  ARRAY_WHERE(&#xA;&#x9;&#x9;ARRAY(&#xA;&#x9;&#x9;&#x9;$gParent, &#xA;&#x9;&#x9;&#x9;$parent, &#xA;&#x9;&#x9;&#x9;ARRAY_CONCAT($current, $currentDes, $currentAccess),&#xA;&#x9;&#x9;), $(i,item) $item &lt;&gt; NULL&#xA;&#x9;   );&#xA;  &#xA;&#xA;&#x9;  LET $parentChain:=&#xA;&#x9;&#x9;ARRAY_SELECT(&#xA;&#x9;&#x9;&#x9;  $parentData, $(i, item)&#xA;&#x9;&#x9;&#x9;  ARRAY_TAKE($item, 2)&#xA;&#x9;   );&#xA;&#xA;&#xA;&#x9;  LET $parentLinks :=&#xA;&#x9;  ARRAY_SELECT(&#xA;&#x9;&#x9;  $parentData, $(i, item) &#xA;&#x9;&#x9;&#x9;  LET $eFormType &#x9;&#x9;:= ARRAY_FIRST($item);&#xA;&#x9;&#x9;&#x9;  LET $recordID &#x9;&#x9;:= ARRAY_INDEX($item, 2);&#xA;&#x9;&#x9;&#x9;  LET $descriptiveLabel := ARRAY_INDEX($item, 3);&#xA;&#x9;&#x9;&#x9;  LET $hasReadAccess&#x9;:= ARRAY_INDEX($item, 4);&#xA;&#x9;&#x9;&#x9;  LET $URL&#x9;:= &quot;records/&quot; &amp; URLENCODE($eFormType) &amp; &quot;/&quot; &amp; $recordID ;&#xA;&#x9;&#x9;&#x9;  LET $showEFormType := $eFormType &lt;&gt; &quot;Vendor&quot;;&#xA;&#xA;&#x9;&#x9;&#x9;  LET $labelColour := &#xA;&#x9;&#x9;&#x9;&#x9;  IF(&#xA;&#x9;&#x9;&#x9;&#x9;   AND($eFormType = [EFormType], $recordID = [RecordID]),&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;  &quot;background: #ffffff; color: #5D5D5D;&quot;,&#xA;&#x9;&#x9;&#x9;&#x9;&#x9; $hasReadAccess = TRUE,&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;  &quot;background: #ffffff; color: #4D87B7;&quot;,&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;  &quot;background: #ffffff; color: #5D5D5D;&quot;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;&#x9;  );&#xA;&#xA;&#xA;&#xA;&#x9;&#x9;&#x9;  LET $labeltext:= &#xA;&#x9;&#x9;&#x9;&#x9;&#x9;  IF( $showEFormType == TRUE, &quot; &quot; &amp; COALESCE(HASH_GET($altFormName, $eFormType), $eFormType) ) &amp;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;  IF(NOT(ISBLANK($descriptiveLabel)), &quot; &quot; &amp; $descriptiveLabel);&#xA;&#xA;&#x9;&#x9;&#x9;  LET $label :=  &#xA;&#x9;&#x9;&#x9;&#x9;  &quot;&lt;span style=&quot;&quot;margin-left: 5px;&quot; &amp; $labelColour &amp; &quot;&quot;&quot;&gt;&quot; &amp;&#xA;&#x9;&#x9;&#x9;&#x9;  HTMLENCODE($labeltext) &amp; &#xA;&#x9;&#x9;&#x9;&#x9;  &quot;&lt;/span&gt;&quot;;&#xA;&#x9;&#x9;&#x9;&#x9;&#xA;&#x9;&#x9;&#x9;  RETURN &#xA;&#x9;&#x9;&#x9;  IF( &#xA;&#x9;&#x9;&#x9;&#x9;  $hasReadAccess == TRUE, &#xA;&#x9;&#x9;&#x9;&#x9;  &quot;&lt;a style=&quot;&quot;text-decoration-line: none;&quot;&quot; href=&quot; &amp; HTMLENCODE($URL) &amp; &quot;&gt;&quot; &amp; $label &amp; &quot;&lt;/a&gt;&quot;,&#xA;&#x9;&#x9;&#x9;&#x9;  $label &#xA;&#x9;&#x9;&#x9;  )&#xA;&#x9;  );&#xA;&#xA;&#x9;   LET $separator :=   &quot;&lt;svg style=&quot;&quot;vertical-align: bottom; margin-left: 5px; height: 18px;&quot;&quot; xmlns=&quot;&quot;http://www.w3.org/2000/svg&quot;&quot; viewBox=&quot;&quot;0 0 256 512&quot;&quot;&gt;&lt;path fill=&quot;&quot;#5D5D5D&quot;&quot; d=&quot;&quot;M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z&quot;&quot;/&gt;&lt;/svg&gt;&quot;;&#xA;&#x9;  &#xA;&#x9;  LET $breadcrumb := &quot;&lt;div style=&quot;&quot;height: 23px; padding-left: 5px; font-size: 10pt; color: #5D5D5D; &quot;&quot;&gt;You are here:&quot; &amp; ARRAY_JOIN($parentLinks, $separator) &amp; &quot;&lt;/div&gt;&quot;;&#xA;&#xA;&#x9;  RETURN &#xA;&#x9;  HASH(&#xA;&#x9;&#x9;  &quot;Parent Structure&quot;,&#x9;$parentStructure,&#xA;&#x9;&#x9;  &quot;Parent Data&quot;, &#x9;&#x9;$parentData,&#xA;&#x9;&#x9;  &quot;Parent Chain&quot;,&#x9;&#x9;$parentChain,&#xA;&#x9;&#x9;  &quot;Breadcrumb&quot;,&#x9;&#x9;$breadcrumb&#xA;&#x9;&#x9;)&#xA;&#x9; )&#xA;)" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <AccessControlGroupMemberships />
        <AccessControlGroups />
        <Security OverrideEFormPermissions="false">
          <Roles />
        </Security>
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </Column>
      <Column Name="Parent Chain" DataType="Any" Guid="122bd878-9f7e-4be1-857b-369bbc3b8f85" IsHeader="true" IsMandatory="false" IsPartOfUniqueKey="false" IsPersistent="true" ValidationFormula="" ValidationTags="" Formula="HASH_GET([Parent Structure], &quot;Parent Chain&quot;)" DefaultValue="" DefaultValueFormula="" DefaultValueFormulaAssignWholeColumn="false" IsEditableInReport="false">
        <AccessControlGroupMemberships />
        <AccessControlGroups />
        <Security OverrideEFormPermissions="false">
          <Roles />
        </Security>
        <IsFullTextIndexed>false</IsFullTextIndexed>
        <Format xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ReportingField xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <ProtectionReason xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <EFormRecordPipes />
      </Column>
    </Columns>
    <ReferenceGroups />
    <Kpis />
    <MergeFields />
  </DataDefinition>
  <Views>
    <ViewEntry Name="Default">
      <View BackColor="0,0,0,0">
        <PdfSettings>
          <PageNumberMode>None</PageNumberMode>
          <FooterTemplate xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        </PdfSettings>
        <SidebarMode>Lock</SidebarMode>
        <HorizontalAlign>Default</HorizontalAlign>
        <Security>
          <Roles>
            <RoleEntry Use="true">
              <Role>Everyone</Role>
            </RoleEntry>
          </Roles>
        </Security>
        <Sections>
          <Section ColumnCount="1" Margin="36" BlockSpacing="20" PageWidth="826" PageHeight="1169">
            <Name xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
            <Notes></Notes>
            <Blocks>
              <Block IsReadOnly="false" ID="Block3">
                <Controls>
                  <Title ID="Control15" IsReadOnly="false" LineNumber="1" Left="6" Top="1" Width="25" Height="4" TabIndex="1" Visible="true" ShowBorder="false" PrintBorder="true" ShowWhenPrinting="true">
                    <Text></Text>
                    <UseEFormNameAsText>true</UseEFormNameAsText>
                    <BorderColor>0,0,0,255</BorderColor>
                    <BackColor>0,0,0,0</BackColor>
                    <TextColor>0,0,0,255</TextColor>
                    <TextAlign>Center</TextAlign>
                    <FontName>Default</FontName>
                    <Bold>true</Bold>
                    <Italic>false</Italic>
                    <Underline>false</Underline>
                    <FontSize>15</FontSize>
                    <FormulaBindings />
                  </Title>
                </Controls>
                <HeadingText>Heading</HeadingText>
                <HeadingHeight>0</HeadingHeight>
                <BodyHeight>6</BodyHeight>
                <IsHeader>false</IsHeader>
                <IsCollapsed>false</IsCollapsed>
                <IsPrintable>true</IsPrintable>
                <EnableScrolling>false</EnableScrolling>
                <BackColor>0,0,0,0</BackColor>
                <HeadingBackColor>128,128,128,255</HeadingBackColor>
                <HeadingTextColor>255,255,255,255</HeadingTextColor>
                <HeadingTextSize>10</HeadingTextSize>
                <HeadingTextAlign>Left</HeadingTextAlign>
                <BorderColor>100,100,100,255</BorderColor>
                <BorderWidth>0</BorderWidth>
                <BorderStyle>Solid</BorderStyle>
                <TabOrderMode>Automatic</TabOrderMode>
                <Event xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
                <FormulaBindings />
                <Visible>true</Visible>
              </Block>
              <Block IsReadOnly="false" ID="Block4">
                <Controls>
                  <NumericTextBox ID="Control17" IsReadOnly="true" LineNumber="1" Left="11" Top="12" Width="15" Height="4" TabIndex="3" Visible="true" ShowBorder="false" PrintBorder="true" ShowWhenPrinting="true">
                    <BorderColor>0,0,0,255</BorderColor>
                    <ReferencedDataColumn>Allocated Number</ReferencedDataColumn>
                    <TextMode>Guess</TextMode>
                    <PlaceholderText xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
                    <Event xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
                    <BackColor>224,224,224,255</BackColor>
                    <TextColor>0,0,0,255</TextColor>
                    <TextAlign>Center</TextAlign>
                    <FontName>Default</FontName>
                    <Bold>false</Bold>
                    <Italic>false</Italic>
                    <Underline>false</Underline>
                    <FontSize>16</FontSize>
                    <FormulaBindings />
                  </NumericTextBox>
                  <NumericTextBox ID="Control18" IsReadOnly="true" LineNumber="1" Left="11" Top="17" Width="15" Height="4" TabIndex="4" Visible="true" ShowBorder="false" PrintBorder="true" ShowWhenPrinting="true">
                    <BorderColor>0,0,0,255</BorderColor>
                    <ReferencedDataColumn>Formatted Number</ReferencedDataColumn>
                    <TextMode>Guess</TextMode>
                    <PlaceholderText xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
                    <Event xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
                    <BackColor>224,224,224,255</BackColor>
                    <TextColor>0,0,0,255</TextColor>
                    <TextAlign>Center</TextAlign>
                    <FontName>Default</FontName>
                    <Bold>false</Bold>
                    <Italic>false</Italic>
                    <Underline>false</Underline>
                    <FontSize>16</FontSize>
                    <FormulaBindings />
                  </NumericTextBox>
                  <Label Text="Allocated" ID="Control19" IsReadOnly="false" LineNumber="1" Left="7" Top="12" Width="4" Height="2" TabIndex="5" Visible="true" ShowBorder="false" PrintBorder="true" ShowWhenPrinting="true">
                    <BorderColor>0,0,0,255</BorderColor>
                    <BackColor>0,0,0,0</BackColor>
                    <TextColor>0,0,0,255</TextColor>
                    <TextAlign>Left</TextAlign>
                    <FontName>Default</FontName>
                    <Bold>false</Bold>
                    <Italic>false</Italic>
                    <Underline>false</Underline>
                    <FontSize>8</FontSize>
                    <FormulaBindings />
                  </Label>
                  <Label Text="Formatted" ID="Control20" IsReadOnly="false" LineNumber="1" Left="7" Top="17" Width="4" Height="2" TabIndex="6" Visible="true" ShowBorder="false" PrintBorder="true" ShowWhenPrinting="true">
                    <BorderColor>0,0,0,255</BorderColor>
                    <BackColor>0,0,0,0</BackColor>
                    <TextColor>0,0,0,255</TextColor>
                    <TextAlign>Left</TextAlign>
                    <FontName>Default</FontName>
                    <Bold>false</Bold>
                    <Italic>false</Italic>
                    <Underline>false</Underline>
                    <FontSize>8</FontSize>
                    <FormulaBindings />
                  </Label>
                  <Box ID="Control22" IsReadOnly="false" LineNumber="1" Left="0" Top="0" Width="37" Height="25" TabIndex="0" Visible="true" ShowBorder="true" PrintBorder="true" ShowWhenPrinting="true">
                    <BackColor>246,246,246,255</BackColor>
                    <BorderColor>255,255,255,255</BorderColor>
                    <Radius>4</Radius>
                    <FormulaBindings />
                  </Box>
                </Controls>
                <HeadingText>Procurement Number</HeadingText>
                <HeadingHeight>0</HeadingHeight>
                <BodyHeight>25</BodyHeight>
                <IsHeader>false</IsHeader>
                <IsCollapsed>false</IsCollapsed>
                <IsPrintable>true</IsPrintable>
                <EnableScrolling>false</EnableScrolling>
                <BackColor>0,0,0,0</BackColor>
                <HeadingBackColor>255,255,255,255</HeadingBackColor>
                <HeadingTextColor>0,85,122,255</HeadingTextColor>
                <HeadingTextSize>10</HeadingTextSize>
                <HeadingTextAlign>Center</HeadingTextAlign>
                <BorderColor>255,255,255,255</BorderColor>
                <BorderWidth>0</BorderWidth>
                <BorderStyle>Solid</BorderStyle>
                <TabOrderMode>Automatic</TabOrderMode>
                <Event xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
                <FormulaBindings />
                <Visible>true</Visible>
              </Block>
            </Blocks>
          </Section>
        </Sections>
        <EnableSquash>false</EnableSquash>
        <BannerHtmlTemplate xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      </View>
    </ViewEntry>
  </Views>
  <Security>
    <PermissionSetName>Custom</PermissionSetName>
    <Roles>
      <RoleEntry Read="true" Write="true" Delete="true" Administrate="true">
        <Role>Administrators</Role>
      </RoleEntry>
      <RoleEntry Read="true" Write="true" Delete="false" Administrate="false">
        <Role>Everyone</Role>
      </RoleEntry>
    </Roles>
    <UseFilterPermissionsForNewRecords>false</UseFilterPermissionsForNewRecords>
    <RecordReadAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
    <RecordWriteAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
    <ComponentAccessControlGroups />
  </Security>
  <SecurityParts>
    <Security>
      <PermissionSetName>Custom</PermissionSetName>
      <Roles>
        <RoleEntry Read="true" Write="true" Delete="true" Administrate="true">
          <Role>Administrators</Role>
        </RoleEntry>
        <RoleEntry Read="true" Write="true" Delete="false" Administrate="false">
          <Role>Everyone</Role>
        </RoleEntry>
      </Roles>
      <UseFilterPermissionsForNewRecords>false</UseFilterPermissionsForNewRecords>
      <RecordReadAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <RecordWriteAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <ComponentAccessControlGroups />
    </Security>
    <Security>
      <PermissionSetName>Open Access</PermissionSetName>
      <Roles>
        <RoleEntry Read="true" Write="true" Delete="true" Administrate="true">
          <Role>Administrators</Role>
        </RoleEntry>
        <RoleEntry Read="true" Write="true" Delete="false" Administrate="false">
          <Role>Everyone</Role>
        </RoleEntry>
      </Roles>
      <UseFilterPermissionsForNewRecords>false</UseFilterPermissionsForNewRecords>
      <RecordReadAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <RecordWriteAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <ComponentAccessControlGroups />
    </Security>
    <Security>
      <PermissionSetName>Department Level Access</PermissionSetName>
      <Roles>
        <RoleEntry Read="true" Write="true" Delete="true" Administrate="true">
          <Role>Administrators</Role>
        </RoleEntry>
        <RoleEntry Read="true" Write="true" Delete="false" Administrate="false">
          <Role>Everyone</Role>
        </RoleEntry>
      </Roles>
      <UseFilterPermissionsForNewRecords>false</UseFilterPermissionsForNewRecords>
      <RecordReadAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <RecordWriteAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <ComponentAccessControlGroups />
    </Security>
    <Security>
      <PermissionSetName>Custom - Boroondara</PermissionSetName>
      <Roles>
        <RoleEntry Read="true" Write="true" Delete="true" Administrate="true">
          <Role>Administrators</Role>
        </RoleEntry>
        <RoleEntry Read="true" Write="true" Delete="false" Administrate="false">
          <Role>Everyone</Role>
        </RoleEntry>
      </Roles>
      <UseFilterPermissionsForNewRecords>false</UseFilterPermissionsForNewRecords>
      <RecordReadAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <RecordWriteAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <ComponentAccessControlGroups />
    </Security>
    <Security>
      <PermissionSetName>Custom - CompareCoOps</PermissionSetName>
      <Roles>
        <RoleEntry Read="true" Write="true" Delete="true" Administrate="true">
          <Role>Administrators</Role>
        </RoleEntry>
        <RoleEntry Read="true" Write="true" Delete="false" Administrate="false">
          <Role>Everyone</Role>
        </RoleEntry>
      </Roles>
      <UseFilterPermissionsForNewRecords>false</UseFilterPermissionsForNewRecords>
      <RecordReadAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <RecordWriteAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <ComponentAccessControlGroups />
    </Security>
    <Security>
      <PermissionSetName>Custom - Cenitex</PermissionSetName>
      <Roles>
        <RoleEntry Read="true" Write="true" Delete="true" Administrate="true">
          <Role>Administrators</Role>
        </RoleEntry>
        <RoleEntry Read="true" Write="true" Delete="false" Administrate="false">
          <Role>Everyone</Role>
        </RoleEntry>
      </Roles>
      <UseFilterPermissionsForNewRecords>false</UseFilterPermissionsForNewRecords>
      <RecordReadAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <RecordWriteAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <ComponentAccessControlGroups />
    </Security>
    <Security>
      <PermissionSetName>Custom - CoGD</PermissionSetName>
      <Roles>
        <RoleEntry Read="true" Write="true" Delete="true" Administrate="true">
          <Role>Administrators</Role>
        </RoleEntry>
        <RoleEntry Read="true" Write="true" Delete="false" Administrate="false">
          <Role>Everyone</Role>
        </RoleEntry>
      </Roles>
      <UseFilterPermissionsForNewRecords>false</UseFilterPermissionsForNewRecords>
      <RecordReadAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <RecordWriteAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <ComponentAccessControlGroups />
    </Security>
    <Security>
      <PermissionSetName>Custom - Ombudsman</PermissionSetName>
      <Roles>
        <RoleEntry Read="true" Write="true" Delete="true" Administrate="true">
          <Role>Administrators</Role>
        </RoleEntry>
        <RoleEntry Read="true" Write="true" Delete="false" Administrate="false">
          <Role>Everyone</Role>
        </RoleEntry>
      </Roles>
      <UseFilterPermissionsForNewRecords>false</UseFilterPermissionsForNewRecords>
      <RecordReadAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <RecordWriteAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <ComponentAccessControlGroups />
    </Security>
    <Security>
      <PermissionSetName>Obsolete - Open Set</PermissionSetName>
      <Roles>
        <RoleEntry Read="true" Write="true" Delete="true" Administrate="true">
          <Role>Administrators</Role>
        </RoleEntry>
        <RoleEntry Read="true" Write="true" Delete="false" Administrate="false">
          <Role>Everyone</Role>
        </RoleEntry>
      </Roles>
      <UseFilterPermissionsForNewRecords>false</UseFilterPermissionsForNewRecords>
      <RecordReadAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <RecordWriteAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <ComponentAccessControlGroups />
    </Security>
    <Security>
      <PermissionSetName>Obsolete - Implementation Set</PermissionSetName>
      <Roles>
        <RoleEntry Read="true" Write="true" Delete="true" Administrate="true">
          <Role>Administrators</Role>
        </RoleEntry>
        <RoleEntry Read="true" Write="true" Delete="false" Administrate="false">
          <Role>Everyone</Role>
        </RoleEntry>
      </Roles>
      <UseFilterPermissionsForNewRecords>false</UseFilterPermissionsForNewRecords>
      <RecordReadAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <RecordWriteAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <ComponentAccessControlGroups />
    </Security>
    <Security>
      <PermissionSetName>Custom - Stonnington</PermissionSetName>
      <Roles>
        <RoleEntry Read="true" Write="true" Delete="true" Administrate="true">
          <Role>Administrators</Role>
        </RoleEntry>
        <RoleEntry Read="true" Write="true" Delete="false" Administrate="false">
          <Role>Everyone</Role>
        </RoleEntry>
      </Roles>
      <UseFilterPermissionsForNewRecords>false</UseFilterPermissionsForNewRecords>
      <RecordReadAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <RecordWriteAccessFilter xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      <ComponentAccessControlGroups />
    </Security>
  </SecurityParts>
  <Categories>
    <CategoryRef>Information Request Management</CategoryRef>
  </Categories>
  <Workflow>
    <EnableAutomatedWorkflow>false</EnableAutomatedWorkflow>
    <AllowManualOverride>true</AllowManualOverride>
    <PromptUserOnWorkflowChange>false</PromptUserOnWorkflowChange>
    <States>
      <State Name="Start" Left="100" Top="100">
        <Transitions />
        <NotificationTemplate xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <SendNotification>false</SendNotification>
        <ForceAssigneeTo xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      </State>
      <State Name="Closed" Left="100" Top="200">
        <Transitions />
        <NotificationTemplate xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <SendNotification>false</SendNotification>
        <ForceAssigneeTo xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
      </State>
    </States>
  </Workflow>
  <Settings>
    <DefaultView>Default</DefaultView>
    <NotifyOnSave>Never</NotifyOnSave>
    <DefaultToNotifyOnSave>false</DefaultToNotifyOnSave>
    <NotifyOnSaveTemplate xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
    <NotifyOnCreate>false</NotifyOnCreate>
    <NotifyOnCreateRecordTemplate xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
    <IncludeRenderedViewInCreateRecordNotification>false</IncludeRenderedViewInCreateRecordNotification>
    <NotifyOnWorkflowChange>false</NotifyOnWorkflowChange>
    <NotifyOnWorkflowChangeTemplate xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
    <NotifyOnClosed>false</NotifyOnClosed>
    <NotifyOnClosedTemplate xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
    <AllowUserToPreviewNotifications>false</AllowUserToPreviewNotifications>
    <DefaultUserToPreviewNotifications>false</DefaultUserToPreviewNotifications>
    <DeleteWithParent>true</DeleteWithParent>
    <EnableManualLinkedEFormRecordsManagement>false</EnableManualLinkedEFormRecordsManagement>
    <IsQuickSearchable>true</IsQuickSearchable>
    <AssignNewRecordsToCurrentUser>false</AssignNewRecordsToCurrentUser>
    <EnableDuplicatingRecords>false</EnableDuplicatingRecords>
    <EnableDeleteFromTabularView>false</EnableDeleteFromTabularView>
    <EnableAddFromTabularView>false</EnableAddFromTabularView>
    <PromptUserBeforeNavigatingAway>true</PromptUserBeforeNavigatingAway>
  </Settings>
  <Attachments>
    <Folders />
  </Attachments>
  <Dependants>
    <Selectors />
  </Dependants>
  <Credentials>
    <Credentials />
  </Credentials>
  <CustomEvents>
    <Event>
      <Name>Calculate Number</Name>
      <Guid>af119030-826e-4abc-a5fc-819df76b30bb</Guid>
      <Description></Description>
      <Tasks>
        <ChangeFieldValues>
          <EFormRef xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
          <RecordIDFormula xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
          <FieldEntries>
            <FieldEntry>
              <ColumnName>Temp</ColumnName>
              <AssignWholeColumn>false</AssignWholeColumn>
              <LineNumberFormula xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
              <Formula>LET $settingsColumns := 
ARRAY(
  "Only Count Current Year", 
  "Use Current Financial Year Prefix", 
  "Use Current Year Prefix",
  "Number Prefix"
);

LET $settings := 
DB_LOOKUP(
  $settingsColumns, 
  "Settings - Information Requests", "[RecordID] = 1"
);

LET $settingsHash := 
INDEXES_TO_KEYS(
  $settings, 
  $settingsColumns
); 

LET $prefix := HASH_GET($settingsHash, "Number Prefix");  
LET $useFYPrefix := HASH_GET($settingsHash, "Use Current Financial Year Prefix");
LET $useCYPrefix := HASH_GET($settingsHash, "Use Current Year Prefix");

//------

LET $startOfCY := DATE(YEAR(NOW()));
LET $startOfFY := EBMS_GET_FINANCIAL_YEAR_START(NOW());
LET $financialYearFilter := " AND [DateCreated] &gt;= " &amp; DB_ENCODECONSTANT($startOfFY);
LET $calendarYearFilter := " AND [DateCreated] &gt;= " &amp; DB_ENCODECONSTANT($startOfCY);

//------

LET $filter := 
"[RecordID] &lt; " &amp; [RecordID] &amp;
(
  IF( 
    AND(
  	HASH_GET($settingsHash, "Only Count Current Year") = TRUE,
  	$useFYPrefix = TRUE
    ),
    $financialYearFilter
  ) &amp; 
  IF( 
    AND(
  	HASH_GET($settingsHash, "Only Count Current Year") = TRUE,
  	$useCYPrefix = TRUE
    ),
    $calendarYearFilter
  )
);


LET $mostRecentAllocatedNumber := 
(
  LET $number :=  
  ARRAY_FIRST(ARRAY_FIRST(
	DB_REPORT(
	  "MAX([Allocated Number])", 
	  "Freedom of Information Number",
	  $filter
	)
  ));

  RETURN 
  $number
); 


LET $newNumberAttempts := $(startingNumber, numberOfAttempts)
(
  ARRAY_SELECT(
    RANGE($startingNumber, $numberOfAttempts), $(i, item)
    LET $allocated := $mostRecentAllocatedNumber + $item;
    LET $formatted := 
    (
  	  LET $prefixNumber := $prefix &amp; $allocated; 
  
  	  LET $yearPrefixNumber := 
  	  IF(
  		$useCYPrefix = TRUE,
  		RIGHT(YEAR(NOW()), 2) &amp; "/" &amp; RIGHT(YEAR(NOW()) + 1, 2) &amp; "-" &amp; $prefixNumber,
  
  		$useFYPrefix = TRUE,
  		RIGHT(FINANCIALYEAR(NOW()) - 1, 2) &amp; "/" &amp; RIGHT(FINANCIALYEAR(NOW()), 2) &amp; "-" &amp; $prefixNumber, 
		
		$prefixNumber
  	  ); 
  
  	  RETURN $yearPrefixNumber
  	);
    
    LET $distinct := DB_LOOKUP("File No.", "Information Request", HASH("File No.", $formatted)) = NULL;
    
    RETURN 
    IF(
  	  $distinct = TRUE, 
  	  HASH(
  	    "Allocated", $allocated,
  	    "Formatted", $formatted,
  	    "Distinct", TRUE
  	  )
    )
  )
); 

LET $extractFirstDistinct := $(arrayOfAttempts)(
  ARRAY_FIRST(ARRAY_WHERE($arrayOfAttempts, $(i, item) $item &lt;&gt; NULL))
); 

LET $distinctNumberHash1 := CALL($extractFirstDistinct, CALL($newNumberAttempts, 1, 5)); //check the next 5 numbers
LET $distinctNumberHash2 := IF($distinctNumberHash1 = NULL, CALL($extractFirstDistinct, CALL($newNumberAttempts, 6, 10))); //check the following 10 numbers
LET $distinctNumberHash3 := IF($distinctNumberHash2 = NULL, CALL($extractFirstDistinct, CALL($newNumberAttempts, 16, 15))); //check the following 15 numbers

RETURN COALESCE($distinctNumberHash1, $distinctNumberHash2, $distinctNumberHash3)</Formula>
            </FieldEntry>
            <FieldEntry>
              <ColumnName>Allocated Number</ColumnName>
              <AssignWholeColumn>false</AssignWholeColumn>
              <LineNumberFormula xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
              <Formula>HASH_GET([Temp], "Allocated")</Formula>
            </FieldEntry>
            <FieldEntry>
              <ColumnName>Formatted Number</ColumnName>
              <AssignWholeColumn>false</AssignWholeColumn>
              <LineNumberFormula xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
              <Formula>HASH_GET([Temp], "Formatted")</Formula>
            </FieldEntry>
            <FieldEntry>
              <ColumnName>Is Distinct</ColumnName>
              <AssignWholeColumn>false</AssignWholeColumn>
              <LineNumberFormula xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
              <Formula>HASH_GET([Temp], "Distinct")</Formula>
            </FieldEntry>
          </FieldEntries>
          <UpdateRecordFormulas>false</UpdateRecordFormulas>
          <Description xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
          <RunOnlyWhen xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        </ChangeFieldValues>
        <Save>
          <WorkflowNotesTemplate xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
          <DisplaySuccessMessage>false</DisplaySuccessMessage>
          <Description xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
          <RunOnlyWhen xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        </Save>
        <SetReturnValue>
          <ResultValueFormula>[Formatted Number]</ResultValueFormula>
          <Description xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
          <RunOnlyWhen xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        </SetReturnValue>
      </Tasks>
    </Event>
  </CustomEvents>
</EForm>